<div class="dashboard-layout">
  <h1 class="hidden-title">{{ title }}</h1>
  <aside class="sidebar">
    <div class="logo-area">
      <a routerLink="/dashboard" style="text-decoration: none; color: inherit; display: flex; align-items: center;" (click)="navigateToDashboard()">
        <span class="logo-icon">‚úîÔ∏è</span>
        <span class="logo-text">TradingThings</span>
      </a>
    </div>
    <ul class="user-list">
      <li *ngIf="isAdmin()"><span class="user-icon">üë§</span> Administrador</li>
      <li *ngIf="!isAdmin()"><span class="user-icon">üë§</span> Usuario</li>
    </ul>
    <div class="sidebar-links">
      <nav>
        <ul>
          <li *ngIf="isAdmin()">
            <a routerLink="/dashboard/todos-los-productos">Listado de todos los productos</a>
          </li>
          <li *ngIf="isAdmin()">
            <a routerLink="/dashboard/usuarios">Listado de usuarios</a>
          </li>
          <li><a routerLink="/dashboard/publicar-producto">Publicar productos</a></li>
          <li><a routerLink="/dashboard/mis-productos">Mis productos</a></li>
          <li><a routerLink="/favoritos">Favoritos</a></li>
          <li><a routerLink="/historial">Historial</a></li>
        </ul>
      </nav>
    </div>
    <div class="sidebar-footer">
      <div class="social-icons">
        <span><i class="fa fa-facebook"></i></span>
        <span><i class="fa fa-instagram"></i></span>
        <span><i class="fa fa-twitter"></i></span>
      </div>
      <div class="phone">Tel√©fono: 123-456-7890</div>
      <button class="logout-btn" (click)="logout()">
        <i class="fa fa-sign-out"></i> Cerrar Sesi√≥n
      </button>
    </div>
  </aside>

  <div class="main-content">
    <header class="main-header">
      <div class="welcome-message">
        <h2>Bienvenido, {{ username }}!</h2>
      </div>
      <div class="user-info">
        <span class="user-avatar"><i class="fa fa-user"></i></span>
        <span class="user-link" (click)="openUserModal()" style="cursor:pointer; color:#1976d2; font-weight:bold;">Mis datos</span>
      </div>
    </header>

    <!-- Modal de usuario -->
    <div *ngIf="showUserModal" class="user-modal-overlay">
      <div class="user-modal-box">
        <h3>Datos del usuario</h3>
        <div *ngIf="usuario">
          <p><strong>Nombre:</strong> {{ usuario.primerNombre }} {{ usuario.segundoNombre }} {{ usuario.apellidoPaterno }} {{ usuario.apellidoMaterno }}</p>
          <p><strong>Correo:</strong> {{ usuario.correo }}</p>
          <p><strong>Usuario:</strong> {{ usuario.usuario }}</p>
          <p><strong>Rol:</strong> {{ usuario.rol?.nombre }}</p>
          <p><strong>Estado:</strong> {{ usuario.estado?.estado }}</p>
        </div>
        <button (click)="closeUserModal()" style="background:#1976d2; color:white; border:none; padding:8px 16px; border-radius:4px; margin-top:10px;">Cerrar</button>
      </div>
    </div>

    <!-- Router outlet for child routes -->
    <router-outlet></router-outlet>
  </div>
</div>
