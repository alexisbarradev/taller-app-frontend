<div class="dashboard-layout">
  <h1 class="hidden-title">{{ title }}</h1>
  <aside class="sidebar">
    <div class="logo-area">
      <span class="logo-icon">‚úîÔ∏è</span>
      <span class="logo-text">TradingThings</span>
    </div>
    <ul class="user-list">
      <li><span class="user-icon">üë§</span> {{ username }}</li>
      <li *ngIf="userRole !== null" class="user-role">Rol: {{ getRoleLabel() }}</li>
    </ul>
    <div class="sidebar-footer">
      <div class="social-icons">
        <span><i class="fa fa-facebook"></i></span>
        <span><i class="fa fa-instagram"></i></span>
        <span><i class="fa fa-twitter"></i></span>
      </div>
      <div class="phone">Tel√©fono: 123-456-7890</div>
      <button class="logout-btn" (click)="logout()">
        <i class="fa fa-sign-out"></i> Cerrar Sesi√≥n
      </button>
    </div>
  </aside>

  <div class="main-content">
    <header class="main-header">
      <div class="welcome-message">
        <h2>Bienvenido, {{ username }}!</h2>
        <p *ngIf="userRole !== null">Rol: {{ getRoleLabel() }}</p>
      </div>
      <div class="user-info">
        <span>{{ username }}</span>
        <span class="user-avatar"><i class="fa fa-user"></i></span>
        <span class="user-role-label">{{ getRoleLabel() }}</span>
      </div>
    </header>

    <!-- Router outlet for child routes -->
    <router-outlet></router-outlet>

    <!-- Dashboard content - only show when no child route is active -->
    <div *ngIf="!hasActiveChildRoute()">
      <!-- Only show publish button and products grid if NOT admin -->
      <div *ngIf="!isAdmin()">
        <div class="publish-btn-area">
          <button class="publish-btn">Publicar producto</button>
        </div>
        <div class="products-grid">
          <div class="product-card" *ngFor="let product of [
            { title: 'Laptop', img: 'https://images.unsplash.com/photo-1517336714731-489689fd1ca8?auto=format&fit=crop&w=400&q=80' },
            { title: 'Sill√≥n', img: 'https://images.unsplash.com/photo-1519710164239-da123dc03ef4?auto=format&fit=crop&w=400&q=80' },
            { title: 'Audifonos', img: 'https://images.unsplash.com/photo-1511367461989-f85a21fda167?auto=format&fit=crop&w=400&q=80' },
            { title: 'Espresso machine', img: 'https://images.unsplash.com/photo-1506744038136-46273834b3fb?auto=format&fit=crop&w=400&q=80' },
            { title: 'Bicicleta', img: 'https://images.unsplash.com/photo-1465101046530-73398c7f28ca?auto=format&fit=crop&w=400&q=80' },
            { title: 'Smartwatch', img: 'https://images.unsplash.com/photo-1516574187841-cb9cc2ca948b?auto=format&fit=crop&w=400&q=80' }
          ]">
            <img [src]="product.img" [alt]="product.title">
            <div class="product-title">{{ product.title }}</div>
            <button class="see-more-btn">Ver m√°s</button>
          </div>
        </div>
      </div>

      <!-- Only show user list if admin -->
      <app-users-list *ngIf="isAdmin()"></app-users-list>
    </div>
  </div>
</div>
